{"ast":null,"code":"import Papa from 'papaparse';\nimport plan2Data from '../data/Insurance_plan2+.csv?raw';\nimport plan3Data from '../data/Insurance_plan3.csv?raw';\nimport plan3PlusData from '../data/Insurance_plan3+.csv?raw';\n\n// แยกข้อมูล CSV เป็น array ของ objects\nconst parseCSV = csvText => {\n  return new Promise(resolve => {\n    Papa.parse(csvText, {\n      header: true,\n      skipEmptyLines: true,\n      complete: results => {\n        resolve(results.data);\n      }\n    });\n  });\n};\n\n// รวมข้อมูล CSV ทั้งหมด\nexport const getAllInsuranceData = async () => {\n  const data2 = await parseCSV(plan2Data);\n  const data3 = await parseCSV(plan3Data);\n  const data3Plus = await parseCSV(plan3PlusData);\n  return [...data2, ...data3, ...data3Plus];\n};\n\n// ดึง CAR_MODEL_CODE ตามที่เลือก CAR_BRAND_CODE\nexport const getModelsByBrand = async brandCode => {\n  const allData = await getAllInsuranceData();\n  const models = [...new Set(allData.filter(row => row.CAR_BRAND_CODE === brandCode).map(row => row.CAR_MODEL_CODE).filter(Boolean))];\n  return models.sort();\n};\n\n// ดึง CAR_SUBMODEL_CODE ตามที่เลือก brand และ model\nexport const getSubModelsByBrandAndModel = async (brandCode, modelCode) => {\n  const allData = await getAllInsuranceData();\n  const subModels = [...new Set(allData.filter(row => row.CAR_BRAND_CODE === brandCode && row.CAR_MODEL_CODE === modelCode).map(row => row.CAR_SUBMODEL_CODE).filter(Boolean))];\n  return subModels.sort();\n};\n\n// ดึง CAR_YEAR ตามที่เลือก brand, model และ submodel\nexport const getYearsByBrandModelSubModel = async (brandCode, modelCode, subModelCode) => {\n  const allData = await getAllInsuranceData();\n  const years = [...new Set(allData.filter(row => row.CAR_BRAND_CODE === brandCode && row.CAR_MODEL_CODE === modelCode && row.CAR_SUBMODEL_CODE === subModelCode).map(row => row.CAR_YEAR).filter(Boolean))];\n  return years.sort((a, b) => b - a); // เรียงจากใหม่ไปเก่า\n};\n\n// ดึงทั้ง brand codes\nexport const getAllBrands = async () => {\n  const allData = await getAllInsuranceData();\n  const brands = [...new Set(allData.map(row => row.CAR_BRAND_CODE).filter(Boolean))];\n  return brands.sort();\n};","map":{"version":3,"names":["Papa","plan2Data","plan3Data","plan3PlusData","parseCSV","csvText","Promise","resolve","parse","header","skipEmptyLines","complete","results","data","getAllInsuranceData","data2","data3","data3Plus","getModelsByBrand","brandCode","allData","models","Set","filter","row","CAR_BRAND_CODE","map","CAR_MODEL_CODE","Boolean","sort","getSubModelsByBrandAndModel","modelCode","subModels","CAR_SUBMODEL_CODE","getYearsByBrandModelSubModel","subModelCode","years","CAR_YEAR","a","b","getAllBrands","brands"],"sources":["/workspaces/befeeeee/pooh-app/src/utils/csvParser.js"],"sourcesContent":["import Papa from 'papaparse';\nimport plan2Data from '../data/Insurance_plan2+.csv?raw';\nimport plan3Data from '../data/Insurance_plan3.csv?raw';\nimport plan3PlusData from '../data/Insurance_plan3+.csv?raw';\n\n// แยกข้อมูล CSV เป็น array ของ objects\nconst parseCSV = (csvText) => {\n  return new Promise((resolve) => {\n    Papa.parse(csvText, {\n      header: true,\n      skipEmptyLines: true,\n      complete: (results) => {\n        resolve(results.data);\n      },\n    });\n  });\n};\n\n// รวมข้อมูล CSV ทั้งหมด\nexport const getAllInsuranceData = async () => {\n  const data2 = await parseCSV(plan2Data);\n  const data3 = await parseCSV(plan3Data);\n  const data3Plus = await parseCSV(plan3PlusData);\n  \n  return [...data2, ...data3, ...data3Plus];\n};\n\n// ดึง CAR_MODEL_CODE ตามที่เลือก CAR_BRAND_CODE\nexport const getModelsByBrand = async (brandCode) => {\n  const allData = await getAllInsuranceData();\n  \n  const models = [...new Set(\n    allData\n      .filter(row => row.CAR_BRAND_CODE === brandCode)\n      .map(row => row.CAR_MODEL_CODE)\n      .filter(Boolean)\n  )];\n  \n  return models.sort();\n};\n\n// ดึง CAR_SUBMODEL_CODE ตามที่เลือก brand และ model\nexport const getSubModelsByBrandAndModel = async (brandCode, modelCode) => {\n  const allData = await getAllInsuranceData();\n  \n  const subModels = [...new Set(\n    allData\n      .filter(row => row.CAR_BRAND_CODE === brandCode && row.CAR_MODEL_CODE === modelCode)\n      .map(row => row.CAR_SUBMODEL_CODE)\n      .filter(Boolean)\n  )];\n  \n  return subModels.sort();\n};\n\n// ดึง CAR_YEAR ตามที่เลือก brand, model และ submodel\nexport const getYearsByBrandModelSubModel = async (brandCode, modelCode, subModelCode) => {\n  const allData = await getAllInsuranceData();\n  \n  const years = [...new Set(\n    allData\n      .filter(row => \n        row.CAR_BRAND_CODE === brandCode && \n        row.CAR_MODEL_CODE === modelCode &&\n        row.CAR_SUBMODEL_CODE === subModelCode\n      )\n      .map(row => row.CAR_YEAR)\n      .filter(Boolean)\n  )];\n  \n  return years.sort((a, b) => b - a); // เรียงจากใหม่ไปเก่า\n};\n\n// ดึงทั้ง brand codes\nexport const getAllBrands = async () => {\n  const allData = await getAllInsuranceData();\n  \n  const brands = [...new Set(\n    allData\n      .map(row => row.CAR_BRAND_CODE)\n      .filter(Boolean)\n  )];\n  \n  return brands.sort();\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}