{"ast":null,"code":"import Papa from 'papaparse';\n\n// แยกข้อมูล CSV เป็น array ของ objects\nconst parseCSV = csvText => {\n  return new Promise(resolve => {\n    Papa.parse(csvText, {\n      header: true,\n      skipEmptyLines: true,\n      complete: results => {\n        resolve(results.data);\n      }\n    });\n  });\n};\n\n// รวมข้อมูล CSV ทั้งหมด\nexport const getAllInsuranceData = async () => {\n  try {\n    const response1 = await fetch('/data/Insurance_plan2+.csv');\n    const response2 = await fetch('/data/Insurance_plan3.csv');\n    const response3 = await fetch('/data/Insurance_plan3+.csv');\n    const csv1 = await response1.text();\n    const csv2 = await response2.text();\n    const csv3 = await response3.text();\n    const data1 = await parseCSV(csv1);\n    const data2 = await parseCSV(csv2);\n    const data3 = await parseCSV(csv3);\n    return [...data1, ...data2, ...data3];\n  } catch (error) {\n    console.error('Error loading CSV data:', error);\n    return [];\n  }\n};\n\n// ดึง CAR_MODEL_CODE ตามที่เลือก CAR_BRAND_CODE\nexport const getModelsByBrand = async brandCode => {\n  const allData = await getAllInsuranceData();\n  const models = [...new Set(allData.filter(row => {\n    var _row$CAR_BRAND_CODE;\n    return ((_row$CAR_BRAND_CODE = row.CAR_BRAND_CODE) === null || _row$CAR_BRAND_CODE === void 0 ? void 0 : _row$CAR_BRAND_CODE.trim()) === (brandCode === null || brandCode === void 0 ? void 0 : brandCode.trim());\n  }).map(row => row.CAR_MODEL_CODE).filter(Boolean))];\n  return models.sort();\n};\n\n// ดึง CAR_SUBMODEL_CODE ตามที่เลือก brand และ model\nexport const getSubModelsByBrandAndModel = async (brandCode, modelCode) => {\n  const allData = await getAllInsuranceData();\n  const subModels = [...new Set(allData.filter(row => {\n    var _row$CAR_BRAND_CODE2, _row$CAR_MODEL_CODE;\n    return ((_row$CAR_BRAND_CODE2 = row.CAR_BRAND_CODE) === null || _row$CAR_BRAND_CODE2 === void 0 ? void 0 : _row$CAR_BRAND_CODE2.trim()) === (brandCode === null || brandCode === void 0 ? void 0 : brandCode.trim()) && ((_row$CAR_MODEL_CODE = row.CAR_MODEL_CODE) === null || _row$CAR_MODEL_CODE === void 0 ? void 0 : _row$CAR_MODEL_CODE.trim()) === (modelCode === null || modelCode === void 0 ? void 0 : modelCode.trim());\n  }).map(row => row.CAR_SUBMODEL_CODE).filter(Boolean))];\n  return subModels.sort();\n};\n\n// ดึง CAR_YEAR ตามที่เลือก brand, model และ submodel\nexport const getYearsByBrandModelSubModel = async (brandCode, modelCode, subModelCode) => {\n  const allData = await getAllInsuranceData();\n  const years = [...new Set(allData.filter(row => {\n    var _row$CAR_BRAND_CODE3, _row$CAR_MODEL_CODE2, _row$CAR_SUBMODEL_COD;\n    return ((_row$CAR_BRAND_CODE3 = row.CAR_BRAND_CODE) === null || _row$CAR_BRAND_CODE3 === void 0 ? void 0 : _row$CAR_BRAND_CODE3.trim()) === (brandCode === null || brandCode === void 0 ? void 0 : brandCode.trim()) && ((_row$CAR_MODEL_CODE2 = row.CAR_MODEL_CODE) === null || _row$CAR_MODEL_CODE2 === void 0 ? void 0 : _row$CAR_MODEL_CODE2.trim()) === (modelCode === null || modelCode === void 0 ? void 0 : modelCode.trim()) && ((_row$CAR_SUBMODEL_COD = row.CAR_SUBMODEL_CODE) === null || _row$CAR_SUBMODEL_COD === void 0 ? void 0 : _row$CAR_SUBMODEL_COD.trim()) === (subModelCode === null || subModelCode === void 0 ? void 0 : subModelCode.trim());\n  }).map(row => row.CAR_YEAR).filter(Boolean))];\n  return years.sort((a, b) => b - a); // เรียงจากใหม่ไปเก่า\n};\n\n// ดึงทั้ง brand codes\nexport const getAllBrands = async () => {\n  const allData = await getAllInsuranceData();\n  const brands = [...new Set(allData.map(row => row.CAR_BRAND_CODE).filter(Boolean))];\n  return brands.sort();\n};","map":{"version":3,"names":["Papa","parseCSV","csvText","Promise","resolve","parse","header","skipEmptyLines","complete","results","data","getAllInsuranceData","response1","fetch","response2","response3","csv1","text","csv2","csv3","data1","data2","data3","error","console","getModelsByBrand","brandCode","allData","models","Set","filter","row","_row$CAR_BRAND_CODE","CAR_BRAND_CODE","trim","map","CAR_MODEL_CODE","Boolean","sort","getSubModelsByBrandAndModel","modelCode","subModels","_row$CAR_BRAND_CODE2","_row$CAR_MODEL_CODE","CAR_SUBMODEL_CODE","getYearsByBrandModelSubModel","subModelCode","years","_row$CAR_BRAND_CODE3","_row$CAR_MODEL_CODE2","_row$CAR_SUBMODEL_COD","CAR_YEAR","a","b","getAllBrands","brands"],"sources":["/workspaces/befeeeee/pooh-app/src/utils/csvParser.js"],"sourcesContent":["import Papa from 'papaparse';\n\n// แยกข้อมูล CSV เป็น array ของ objects\nconst parseCSV = (csvText) => {\n  return new Promise((resolve) => {\n    Papa.parse(csvText, {\n      header: true,\n      skipEmptyLines: true,\n      complete: (results) => {\n        resolve(results.data);\n      },\n    });\n  });\n};\n\n// รวมข้อมูล CSV ทั้งหมด\nexport const getAllInsuranceData = async () => {\n  try {\n    const response1 = await fetch('/data/Insurance_plan2+.csv');\n    const response2 = await fetch('/data/Insurance_plan3.csv');\n    const response3 = await fetch('/data/Insurance_plan3+.csv');\n    \n    const csv1 = await response1.text();\n    const csv2 = await response2.text();\n    const csv3 = await response3.text();\n    \n    const data1 = await parseCSV(csv1);\n    const data2 = await parseCSV(csv2);\n    const data3 = await parseCSV(csv3);\n    \n    return [...data1, ...data2, ...data3];\n  } catch (error) {\n    console.error('Error loading CSV data:', error);\n    return [];\n  }\n};\n\n// ดึง CAR_MODEL_CODE ตามที่เลือก CAR_BRAND_CODE\nexport const getModelsByBrand = async (brandCode) => {\n  const allData = await getAllInsuranceData();\n  \n  const models = [...new Set(\n    allData\n      .filter(row => row.CAR_BRAND_CODE?.trim() === brandCode?.trim())\n      .map(row => row.CAR_MODEL_CODE)\n      .filter(Boolean)\n  )];\n  \n  return models.sort();\n};\n\n// ดึง CAR_SUBMODEL_CODE ตามที่เลือก brand และ model\nexport const getSubModelsByBrandAndModel = async (brandCode, modelCode) => {\n  const allData = await getAllInsuranceData();\n  \n  const subModels = [...new Set(\n    allData\n      .filter(row => \n        row.CAR_BRAND_CODE?.trim() === brandCode?.trim() && \n        row.CAR_MODEL_CODE?.trim() === modelCode?.trim()\n      )\n      .map(row => row.CAR_SUBMODEL_CODE)\n      .filter(Boolean)\n  )];\n  \n  return subModels.sort();\n};\n\n// ดึง CAR_YEAR ตามที่เลือก brand, model และ submodel\nexport const getYearsByBrandModelSubModel = async (brandCode, modelCode, subModelCode) => {\n  const allData = await getAllInsuranceData();\n  \n  const years = [...new Set(\n    allData\n      .filter(row => \n        row.CAR_BRAND_CODE?.trim() === brandCode?.trim() && \n        row.CAR_MODEL_CODE?.trim() === modelCode?.trim() &&\n        row.CAR_SUBMODEL_CODE?.trim() === subModelCode?.trim()\n      )\n      .map(row => row.CAR_YEAR)\n      .filter(Boolean)\n  )];\n  \n  return years.sort((a, b) => b - a); // เรียงจากใหม่ไปเก่า\n};\n\n// ดึงทั้ง brand codes\nexport const getAllBrands = async () => {\n  const allData = await getAllInsuranceData();\n  \n  const brands = [...new Set(\n    allData\n      .map(row => row.CAR_BRAND_CODE)\n      .filter(Boolean)\n  )];\n  \n  return brands.sort();\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}